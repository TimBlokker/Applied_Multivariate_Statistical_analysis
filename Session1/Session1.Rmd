---
title: "Session1 - Introduction to R"
output: html_notebook
---


```{r}
#Creating a Data frame
plotID <- c(1, 2, 3, 4)
altitude <- c(300, 400, NA, 700)
region <- c("A", "B", "C", "B")
crop <- c("corn", "corn", "potato", "barley")
farmdata <- data.frame(plotID, altitude, region, crop)
farmdata
```

```{r}
str(farmdata)  #structure of my object
```



####Data structures

Nominal: variables are categorical, without an implied order (region, crop)
Ordinal: variables imply order but not amount (plotID)
Continuous: variables can take on any value within some range, and both order and amount are implied (altitude)

```{r}
status <- c("bad", "good", "good", "excellent")
status <- factor(status, order = T)
farmdata <- data.frame(plotID, altitude, region, crop, status)
str(farmdata)  #looking the structure of farmdata 
```

```{r}
levels(farmdata$status)  #levels of your factor (either ordinal or nominal)
nlevels(farmdata$status)  #number of levels 
```

####List

A list is an ordered collection of objects (components). A list allows you to gather a variety of (possibly unrelated) objects under one name. A list may contain a combination of vectors, matrices, data frames, and lists.

```{r}
a <- "My First List"
b <- c(7, 13, 28, 8)
c <- matrix(1:10, nrow = 5)
d <- c("one", "two", "three")
mylist <- list(title = a, vec = b, mat = c, ord = d)
mylist 
```

```{r}
str(mylist)
```

```{r}
mylist[2]  #print the second component
mylist[[2]]  #print the second component , the second brackets does not print the name anymore)
```

```{r}
mylist[3]  #print the third component
```

####User-written functions

Instructions to use repeatedly or that, because of their complexity, are better self-contained in a sub program and called when needed
```{r}
x<-mylist[[2]]#here I cannot use one bracket, i need to use 2
my.summary <- function(x) {
    n <- length(x)
    avg <- mean(x)
    std.dev <- sd(x)
    return(c(N = n, Mean = avg, Standard.Deviation = std.dev))
}
my.summary(x)
my.summary(seq(0, 12, 2))
```

####Importing data
```{r}
cpi <- read.csv("data/cpi.csv")  #reading my .csv file
```
```{r}
length(cpi)  #number of columns
class(cpi)  #check to see that cpi is a data.frame
dim(cpi)  #number of rows and columns
names(cpi)  #column names
str(cpi)  #structure of the object
```


####Recoding variables
```{r}
cpi$CPI <- cpi$CPI * 1.5  #other options: +, -, / and  ^
cpi$CPI[cpi$CPI > 3] <- 7  #other options: < (less than), <= (less than or equal to), >= (greater than or equal to), == (exactly equal to) and != (not equal to)
cpi
cpi$CPI[cpi$CPI >= 4 & cpi$CPI <= 5] <- 4.5  #other option: | (or)
cpi
```

####Reshaping variables
```{r}
cpi[1:3,]
alfa <- t(cpi[1:3, ])  #transposing values from row 1 until 3, for all the variables
alfa
```

####Type conversions
```{r}
is.numeric(cpi$CPI)  #testing object
beta <- as.character(cpi$CPI)  #converting to character
is.character(beta)  #testing object
```

####Aggregation and reshaping
```{r}
?aggregate
aggcpi <- aggregate(cpi$CPI, by = list(region = cpi$Region), mean)  #summarizing values
aggcpi
```

```{r}
gamma <- c(1, 2, 3, NA)
sum(gamma)
is.na(gamma)
sum(gamma, na.rm = TRUE)  #sum excluding NA values
```

####Brief introduction to dplyr
```{r}
help(iris)  #dataset in base-R
dat <- iris
str(dat)
```
```{r}
head(dat)
```


```{r}
library(dplyr)
f1 <- filter(dat, Species == "setosa")
head(f1)
```
```{r}
s1 <- filter(dat, Species == "setosa") %>% select(Sepal.Length)
head(s1)
```

```{r}
s2 <- dat[dat$Species == "setosa", colnames(dat) == "Sepal.Length"]
head(s2)
```

####Online tutorials

    R documentation: https://cran.r-project.org/manuals.html
    R tutorial: https://cran.r-project.org/other-docs.html
    R packages: https://cran.r-project.org/web/views/
    http://r4ds.had.co.nz/
    https://moderndive.com/
    https://swirlstats.com/
